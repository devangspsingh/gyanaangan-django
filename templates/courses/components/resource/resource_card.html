{% load tags %}
<div class="w-full overflow-hidden items-stretch justify-between flex flex-col gap-2 h-full mx-auto border rounded-lg shadow-md bg-stone-800 border-gray-700 p-6 transition-transform transform">
    <div class="flex w-full justify-between items-start">
        <div class="flex items-center gap-2">
            <div class="flex justify-center w-6">
                {% if item.type == "pyq" %}
                    <svg xmlns="http://www.w3.org/2000/svg"
                         fill="currentColor"
                         class="bi bi-clipboard2-fill"
                         viewBox="0 0 16 16"
                         aria-label="Previous Year Questions Paper">
                        <path d="M9.5 0a.5.5 0 0 1 .5.5.5.5 0 0 0 .5.5.5.5 0 0 1 .5.5V2a.5.5 0 0 1-.5.5h-5A.5.5 0 0 1 5 2v-.5a.5.5 0 0 1 .5-.5.5.5 0 0 0 .5-.5.5.5 0 0 1 .5-.5z" />
                        <path d="M3.5 1h.585A1.5 1.5 0 0 0 4 1.5V2a1.5 1.5 0 0 0 1.5 1.5h5A1.5 1.5 0 0 0 12 2v-.5q-.001-.264-.085-.5h.585A1.5 1.5 0 0 1 14 2.5v12a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 14.5v-12A1.5 1.5 0 0 1 3.5 1" />
                        <!-- Adding the PYQ Text -->
                        <text x="50%" y="55%" dominant-baseline="middle" text-anchor="middle" font-size="4" font-family="Arial" fill="black">PYQ</text>
                    </svg>
                {% elif item.type == "video" %}
                    <svg xmlns="http://www.w3.org/2000/svg"
                         fill="currentColor"
                         class="bi bi-youtube"
                         viewBox="0 0 16 16"
                         aria-label="Youtube Video">
                        <path d="M8.051 1.999h.089c.822.003 4.987.033 6.11.335a2.01 2.01 0 0 1 1.415 1.42c.101.38.172.883.22 1.402l.01.104.022.26.008.104c.065.914.073 1.77.074 1.957v.075c-.001.194-.01 1.108-.082 2.06l-.008.105-.009.104c-.05.572-.124 1.14-.235 1.558a2.01 2.01 0 0 1-1.415 1.42c-1.16.312-5.569.334-6.18.335h-.142c-.309 0-1.587-.006-2.927-.052l-.17-.006-.087-.004-.171-.007-.171-.007c-1.11-.049-2.167-.128-2.654-.26a2.01 2.01 0 0 1-1.415-1.419c-.111-.417-.185-.986-.235-1.558L.09 9.82l-.008-.104A31 31 0 0 1 0 7.68v-.123c.002-.215.01-.958.064-1.778l.007-.103.003-.052.008-.104.022-.26.01-.104c.048-.519.119-1.023.22-1.402a2.01 2.01 0 0 1 1.415-1.42c.487-.13 1.544-.21 2.654-.26l.17-.007.172-.006.086-.003.171-.007A100 100 0 0 1 7.858 2zM6.4 5.209v4.818l4.157-2.408z" />
                    </svg>
                {% else %}
                    <svg xmlns="http://www.w3.org/2000/svg"
                         fill="currentColor"
                         class="w-6 h-6"
                         viewBox="0 0 16 16"
                         aria-label="PDF Resource">
                        <path d="M5.523 10.424q.21-.124.459-.238a8 8 0 0 1-.45.606c-.28.337-.498.516-.635.572l-.035.012a.3.3 0 0 1-.026-.044c-.056-.11-.054-.216.04-.36.106-.165.319-.354.647-.548m2.455-1.647q-.178.037-.356.078a21 21 0 0 0 .5-1.05 12 12 0 0 0 .51.858q-.326.048-.654.114m2.525.939a4 4 0 0 1-.435-.41q.344.007.612.054c.317.057.466.147.518.209a.1.1 0 0 1 .026.064.44.44 0 0 1-.06.2.3.3 0 0 1-.094.124.1.1 0 0 1-.069.015c-.09-.003-.258-.066-.498-.256M8.278 4.97c-.04.244-.108.524-.2.829a5 5 0 0 1-.089-.346c-.076-.353-.087-.63-.046-.822.038-.177.11-.248.196-.283a.5.5 0 0 1 .145-.04c.013.03.028.092.032.198q.008.183-.038.465z" />
                        <path fill-rule="evenodd" d="M4 0h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2m.165 11.668c.09.18.23.343.438.419.207.075.412.04.58-.03.318-.13.635-.436.926-.786.333-.401.683-.927 1.021-1.51a11.6 11.6 0 0 1 1.997-.406c.3.383.61.713.91.95.28.22.603.403.934.417a.86.86 0 0 0 .51-.138c.155-.101.27-.247.354-.416.09-.181.145-.37.138-.563a.84.84 0 0 0-.2-.518c-.226-.27-.596-.4-.96-.465a5.8 5.8 0 0 0-1.335-.05 11 11 0 0 1-.98-1.686c.25-.66.437-1.284.52-1.794.036-.218.055-.426.048-.614a1.24 1.24 0 0 0-.127-.538.7.7 0 0 0-.477-.365c-.202-.043-.41 0-.601.077-.377.15-.576.47-.651.823-.073.34-.04.736.046 1.136.088.406.238.848.43 1.295a20 20 0 0 1-1.062 2.227 7.7 7.7 0 0 0-1.482.645c-.37.22-.699.48-.897.787-.21.326-.275.714-.08 1.103" />
                    </svg>
                {% endif %}
            </div>
            <h1 class="font-semibold text-white hover:text-blue-400">
                {% if slugs %}
                    <a href="{% url 'resource_view_all_detail' slugs.course_slug slugs.stream_slug slugs.year_slug slugs.subject_slug item.slug %}">
                        {{ item.name }} - {{ item.type | upper }}
                    </a>
                {% else %}
                    <a href="{% url 'resource_view' item.slug %}">{{ item.name }} - {{ item.type | upper }}</a>
                {% endif %}
            </h1>
        </div>
    </div>
    <div class="flex flex-wrap items-center text-sm justify-between mt-2">
        <div class="flex gap-2 text-gray-400 font-bold">
            <time class="rounded-full">{{ item.get_last_updated_at.status }}</time>Â·
            <p>{{ item.educational_year.name }}</p>
        </div>
        <div class="flex items-center gap-6">
            <div class="flex justify-center w-6">
                {% if slugs %}
                    <a href="{% url 'resource_view_all_detail' slugs.course_slug slugs.stream_slug slugs.year_slug slugs.subject_slug item.slug %}">
                        <svg class="w-6 h-6"
                             xmlns="http://www.w3.org/2000/svg"
                             fill="none"
                             viewBox="0 0 24 24"
                             stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 4.5 12 4.5c4.477 0 8.268 3.443 9.542 7.5-1.274 4.057-5.065 7.5-9.542 7.5-4.477 0-8.268-3.443-9.542-7.5z" />
                        </svg>
                    </a>
                {% else %}
                    <a href="{% url 'resource_view' item.slug %}">
                        <svg class="w-6 h-6"
                             xmlns="http://www.w3.org/2000/svg"
                             fill="none"
                             viewBox="0 0 24 24"
                             stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 4.5 12 4.5c4.477 0 8.268 3.443 9.542 7.5-1.274 4.057-5.065 7.5-9.542 7.5-4.477 0-8.268-3.443-9.542-7.5z" />
                        </svg>
                    </a>
                {% endif %}
            </div>
            <div class="flex justify-center items-center w-6">
                {% if "download" in item.privacy %}
                    <a target="_blank" href="{{ item.file.url }}">
                        <svg xmlns="http://www.w3.org/2000/svg"
                             class="w-6 h-6 hover:fill-yellow-100"
                             fill="currentColor"
                             viewBox="0 0 16 16">
                            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5" />
                            <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z" />
                        </svg>
                    </a>
                {% else %}
                    <span title="download is not allowed">
                        <svg xmlns="http://www.w3.org/2000/svg"
                             class="w-6 h-6 text-gray-400 pointer-events-none opacity-60"
                             fill="currentColor"
                             viewBox="0 0 16 16">
                            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5" />
                            <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z" />
                            <line x1="0" y1="0" x2="16" y2="16" stroke="gray" stroke-width="1.5" />
                        </svg>
                    </span>
                {% endif %}
            </div>
            {% if user.is_authenticated %}
                <div class="flex justify-center w-6">
                    <form action="{% url 'toggle_save_resource' item.id %}" method="post">
                        {% csrf_token %}
                        {% if item|is_saved_by_user:user %}
                            <!-- Display Unsave Button -->
                            <button type="submit" class="focus:outline-none">
                                <svg xmlns="http://www.w3.org/2000/svg"
                                     width="16"
                                     height="16"
                                     fill="currentColor"
                                     class="bi bi-bookmark w-6 h-6 text-green-500 hover:text-red-500 transition-colors"
                                     viewBox="0 0 16 16">
                                    <path d="M2 2v13.5a.5.5 0 0 0 .74.439L8 13.069l5.26 2.87A.5.5 0 0 0 14 15.5V2a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2" />
                                </svg>
                                <span class="sr-only">Unsave</span>
                            </button>
                        {% else %}
                            <!-- Display Save Button -->
                            <button type="submit" class="focus:outline-none save-button">
                                <svg xmlns="http://www.w3.org/2000/svg"
                                     width="16"
                                     height="16"
                                     fill="currentColor"
                                     class="bi bi-bookmark w-6 h-6 text-gray-400 hover:text-green-500 transition-colors"
                                     viewBox="0 0 16 16">
                                    <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1z" />
                                </svg>
                                <span class="sr-only">Save</span>
                            </button>
                        {% endif %}
                    </form>
                </div>
            {% else %}
                <!-- Save Button for Non-Authenticated Users -->
                <div class="flex justify-center w-6">
                    <button data-modal-target="login-modal"
                            data-modal-toggle="login-modal"
                            class="focus:outline-none save-button">
                        <svg xmlns="http://www.w3.org/2000/svg"
                             width="16"
                             height="16"
                             fill="currentColor"
                             class="bi bi-bookmark w-6 h-6 text-gray-400 hover:text-green-500 transition-colors"
                             viewBox="0 0 16 16">
                            <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1z" />
                        </svg>
                        <span class="sr-only">Save</span>
                    </button>
                </div>
            {% endif %}
        </div>
    </div>
    <div class="transition-all -z-10 duration-300 absolute h-full inset-y-0 right-0 md:w-[106px] flex items-center w-[106px]">
        <div class="md:h-[135%] bg-gray-700 scale-100 group-hover:scale-[400%] h-[135%] aspect-square flex items-center rounded-full transition-transform">
        </div>
    </div>
</div>
